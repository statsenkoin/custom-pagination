{"mappings":"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","sources":["src/js/partials/fetch-pixabay.js","src/js/partials/markup-gallery.js","src/js/simple-pagination/simple-pagination.js","src/js/simple-pagination/simple-pagi-flow.js"],"sourcesContent":["const API_KEY = '32468715-2ee7d1cef437ed65ce73ff92a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst params = new URLSearchParams({\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\n/**\n *\n * @param {String} query - userInput\n * @param {Number} page - requested page\n * @param {Number} perPage - number of requested objects\n * @returns array of objects or error message\n */\nexport default async function fetchPixabay(query, page, perPage) {\n  try {\n    const responce = await fetch(\n      `${BASE_URL}?q=${query}&page=${page}&per_page=${perPage}&${params}`\n    );\n    return await responce.json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n","export default function markupGallery(hits, gallery) {\n  let markup = hits.reduce((acc, { webformatURL, tags, id }) => {\n    return (acc += ` <img \n          class=\"card-image\" \n          id=\"${id}\"\n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n          loading=\"lazy\"\n        />`);\n  }, '');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","/**\n * Resourse:\n * https://jasonwatmore.com/post/2018/08/07/javascript-pure-pagination-logic-in-vanilla-js-typescript\n */\n\nexport const paginationRef = document.querySelector('.js-pagination');\n\nlet output;\nlet targetPage;\nlet currentPage = 1;\nlet totalPages;\n\n// Catches layout orientation changes (600px - to be suitable for old (8.34%) tablets)\nlet media = window.matchMedia('(min-width: 600px)');\n// Maximum number of page navigation links to display (does NOT include arrows)\nlet pagiLength = media.matches ? 9 : 5;\n\nmedia.addEventListener('change', event => {\n  pagiLength = event.matches ? 9 : 5;\n  updatePagination(currentPage, totalPages);\n});\n\n/**\n * Rerenders pagination line\n * @param {Number} page - the current active page\n * @param {Number} pages - the total number of pages\n */\nexport function updatePagination(page, pages) {\n  currentPage = page;\n  totalPages = pages;\n  output = paginate(currentPage, totalPages);\n  markupPagination(output, paginationRef);\n}\n\n/**\n * Finds out correct target page\n * @param {event} event click on button element\n * @returns currentPage\n */\nexport function getCurrentPage(event) {\n  if (event.target.nodeName !== 'BUTTON') return currentPage;\n  const targetPageText = event.target.textContent;\n\n  if (!isNaN(Number(targetPageText))) targetPage = Number(targetPageText);\n  if (targetPageText === '>' && currentPage === totalPages) return totalPages;\n  if (targetPageText === '>') targetPage = currentPage + 1;\n  if (targetPageText === '<' && currentPage === 1) return 1;\n  if (targetPageText === '<') targetPage = currentPage - 1;\n  if (targetPageText === ' ...') targetPage = currentPage - (pagiLength - 4);\n  if (targetPageText === '... ') targetPage = currentPage + (pagiLength - 4);\n  if (targetPage === currentPage) return currentPage;\n  currentPage = targetPage;\n  return currentPage;\n}\n\n/**\n * Form an array of chars to be displayed on pagination buttons\n * @param {Number} currentPage - the current active page\n * @param {Number} totalPages - the total number of pages\n * @returns {Array} of text content for buttons in pagination line\n */\nfunction paginate(currentPage, totalPages) {\n  const output = [];\n  let startPage;\n  let endPage;\n  const offsetPages = Math.floor(pagiLength / 2);\n  if (currentPage < 1) {\n    currentPage = 1;\n  } else if (currentPage > totalPages) {\n    currentPage = totalPages;\n  }\n  if (totalPages <= pagiLength) {\n    startPage = 1;\n    endPage = totalPages;\n  } else {\n    if (currentPage <= offsetPages) {\n      startPage = 1;\n      endPage = pagiLength;\n    } else if (currentPage + offsetPages >= totalPages) {\n      startPage = totalPages - offsetPages * 2;\n      endPage = totalPages;\n    } else {\n      startPage = currentPage - offsetPages;\n      endPage = currentPage + offsetPages;\n    }\n  }\n  for (let i = startPage; i <= endPage; i += 1) {\n    output.push(i);\n  }\n  if (pagiLength === 9) {\n    output.splice(0, 1, 1);\n    output.splice(output.length - 1, 1, totalPages);\n    if (currentPage - 1 > offsetPages && totalPages > pagiLength) {\n      output.splice(1, 1, ' ...');\n    }\n    if (currentPage + 1 + offsetPages < totalPages && totalPages > pagiLength)\n      output.splice(output.length - 2, 1, '... ');\n  }\n  return output;\n}\n\n/**\n * Marks up pagination line\n * @param {Array} output - text content for buttons in pagination line output\n * @param {DOM element} paginationRef - where to put pagination line\n */\nfunction markupPagination(output, paginationRef) {\n  let markup = output.reduce((acc, item) => {\n    const pagiClass =\n      item === currentPage\n        ? 'class=\"pagination-button pagination-button-current\"'\n        : 'class=\"pagination-button\"';\n    return (acc += `<button type=\"button\" ${pagiClass}>${item}</button>`);\n  }, ``);\n  if (totalPages > pagiLength && currentPage !== 1) {\n    markup =\n      `<button type=\"button\" class=\"pagination-button\">&lt;</button>` + markup;\n  }\n  if (totalPages > pagiLength && currentPage !== totalPages) {\n    markup += `<button type=\"button\" class=\"pagination-button\">&gt;</button>`;\n  }\n  paginationRef.innerHTML = '';\n  paginationRef.insertAdjacentHTML('beforeend', markup);\n}\n","import fetchPixabay from '../partials/fetch-pixabay';\nimport markupGallery from '../partials/markup-gallery';\n\nlet userInput = '';\nconst perPage = 12;\nconst gallery = document.querySelector('.js-gallery');\n\n// ===== Simple-pagination usage ====================================\n\nimport {\n  updatePagination,\n  getCurrentPage,\n  paginationRef,\n} from './simple-pagination';\n\nlet totalPages = 100;\nlet currentPage = 1;\npaginationRef.addEventListener('click', onPaginationButtonClick);\n\ninitGallery();\n\nasync function initGallery() {\n  await updateMarkup();\n  updatePagination(currentPage, totalPages);\n}\n\nasync function onPaginationButtonClick(event) {\n  const targetPage = getCurrentPage(event);\n  if (currentPage === targetPage) return;\n  currentPage = targetPage;\n  updatePagination(currentPage, totalPages);\n  await updateMarkup();\n}\n\n// ==================================================================\n\nasync function updateMarkup() {\n  try {\n    const data = await fetchPixabay(userInput, currentPage, perPage);\n    if (!data.hits.length) return;\n\n    const { hits, totalHits } = data;\n    totalPages = Math.ceil(totalHits / perPage);\n\n    gallery.innerHTML = '';\n    markupGallery(hits, gallery);\n  } catch (error) {\n    console.log('error :>> ', error);\n  }\n}\n"],"names":["$b97d44f28464450a$var$params","URLSearchParams","key","image_type","orientation","safesearch","async","$b97d44f28464450a$export$2e2bcd8739ae039","query","page","perPage","responce","fetch","json","error","console","log","$c3802fabb41546b6$export$2e2bcd8739ae039","hits","gallery","markup","reduce","acc","webformatURL","tags","id","insertAdjacentHTML","$435250a0f83122cf$export$282ede1754680aae","document","querySelector","$435250a0f83122cf$var$output","$435250a0f83122cf$var$targetPage","$435250a0f83122cf$var$totalPages","$435250a0f83122cf$var$currentPage","$435250a0f83122cf$var$media","window","matchMedia","$435250a0f83122cf$var$pagiLength","matches","$435250a0f83122cf$export$909ec5aabce1b1f7","pages","currentPage1","totalPages1","output1","startPage","endPage","offsetPages","Math","floor","i","push","splice","length","$435250a0f83122cf$var$paginate","output2","paginationRef1","item","innerHTML","$435250a0f83122cf$var$markupPagination","$435250a0f83122cf$export$7945ba8eb1c827e6","event","target","nodeName","targetPageText","textContent","isNaN","Number","addEventListener","$23b86c21d7617fd9$var$gallery","$23b86c21d7617fd9$var$totalPages","$23b86c21d7617fd9$var$currentPage","$23b86c21d7617fd9$var$updateMarkup","data","totalHits","ceil","targetPage","$23b86c21d7617fd9$var$initGallery"],"version":3,"file":"index.0d06e370.js.map"}